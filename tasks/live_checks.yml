---
- name: wget from host and check response
  get_url:
    url: http://192.168.179.167/centos
    dest: /home/admin/index.html

- name: Check in index
  lineinfile: 
    dest: /home/admin/index.html
    regexp: "Index of /centos/"
  check_mode: yes
  register: presence
  failed_when: presence.changed

- name: Read html
  shell: cat /home/admin/index.html
  register: html

- name: Check if file still working
  debug:
    msg: "File Compare"
  failed_when: "'<head><title>Index of /centos/</title></head>' in {{html.stdout}}"